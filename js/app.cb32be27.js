(function(e){function t(t){for(var a,l,r=t[0],s=t[1],d=t[2],c=0,p=[];c<r.length;c++)l=r[c],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&p.push(n[l][0]),n[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,d||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],a=!0,r=1;r<i.length;r++){var s=i[r];0!==n[s]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=i[0]))}return e}var a={},n={app:0},o=[];function l(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=a,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(i,a,function(t){return e[t]}.bind(null,a));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/map_publish1/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var u=s;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},1643:function(e){e.exports=JSON.parse('{"data":[{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"Assem1 v1.fbx","layerName":"bldg_葉本家住宅(ダミー)","lnglat":{"lng":135.78518227666942,"lat":34.65125578398946},"scale":{"x":0.001,"y":0.001,"z":0.001},"rotDeg":-90,"bldgIds":[1283116391086280,945294664780595]},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"Assem1 v1.fbx","layerName":"bldg_本家菊屋（お菓子司）(ダミー)","lnglat":{"lng":135.7832776354353,"lat":34.64881768361106},"scale":{"x":0.001,"y":0.001,"z":0.001},"rotDeg":0,"bldgIds":[4353698205317365]},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"Assem1 v1.fbx","layerName":"bldg_松田家住宅(ダミー)","lnglat":{"lng":135.7868898,"lat":34.64911379},"scale":{"x":0.001,"y":0.001,"z":0.001},"rotDeg":0,"bldgIds":[939528872040415]},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"Assem1 v1.fbx","layerName":"bldg_町家物語館（旧川本家住宅）(ダミー)","lnglat":{"lng":135.7849416,"lat":34.645873550602715},"scale":{"x":0.001,"y":0.001,"z":0.0005},"rotDeg":0,"bldgIds":[4455189006839125]}]}')},"22dc":function(e,t,i){},2665:function(e,t,i){"use strict";i("a39c")},2837:function(e,t,i){"use strict";i("22dc")},"688a":function(e){e.exports=JSON.parse('{"BuildingInfo":[{"BuildingID":"767825333543645","Name":"K coffee","Address":"〒639-1134 奈良県大和郡山市柳４丁目４−４６","InfoUrl":"https://kcoffee.jp/","VirtualSpaceUrl":"https://cluster.mu/w/62841b14-ba7d-4641-9ceb-a91118dbb728","IsMapBoxOrigin":"True","Space":{"SpaceID":"0","BusinessStartTime":"1000","BusinessEndTime":"1700","PeopleCount":[{"Time":"1000","TimeValue":"2"},{"Time":"1100","TimeValue":"3"},{"Time":"1200","TimeValue":"4"},{"Time":"1300","TimeValue":"2"},{"Time":"1400","TimeValue":"5"},{"Time":"1500","TimeValue":"5"},{"Time":"1600","TimeValue":"2"},{"Time":"1700","TimeValue":"3"}]}},{"BuildingID":"4133308098940125","Name":"asmo大和郡山","Address":"〒639-1007 奈良県大和郡山市南郡山町５２９−２","InfoUrl":"https://www.asmo-na.jp/","VirtualSpaceUrl":"","IsMapBoxOrigin":"True","Space":{"SpaceID":"0","BusinessStartTime":"1600","BusinessEndTime":"2400","PeopleCount":[{"Time":"0800","TimeValue":"2"},{"Time":"0900","TimeValue":"3"},{"Time":"1000","TimeValue":"4"}]}},{"BuildingID":"3177385161686185","Name":"三の丸駐輪場(仮設)","Address":"〒639-1007 奈良県大和郡山市南郡山町５２０−４","InfoUrl":"https://www.google.com/","VirtualSpaceUrl":"","IsMapBoxOrigin":"False","Space":{"SpaceID":"0","BusinessStartTime":"1500","BusinessEndTime":"2400","PeopleCount":[{"Time":"0800","TimeValue":"5"},{"Time":"0900","TimeValue":"3"},{"Time":"1000","TimeValue":"2"}]}},{"BuildingID":"3174744383841225","Name":"お店A","Address":"〒639-1007 奈良県大和郡山市南郡山町〇〇−◯","InfoUrl":"https://www.google.com/","VirtualSpaceUrl":"","IsMapBoxOrigin":"False","Space":{"SpaceID":"0","BusinessStartTime":"0900","BusinessEndTime":"1900","PeopleCount":[{"Time":"0800","TimeValue":"6"},{"Time":"0900","TimeValue":"1"},{"Time":"1000","TimeValue":"4"}]}},{"BuildingID":"386509289407355","Name":"お店B","Address":"〒639-1007 奈良県大和郡山市南郡山町〇〇−◯","InfoUrl":"https://www.google.com/","VirtualSpaceUrl":"","IsMapBoxOrigin":"False","Space":{"SpaceID":"0","BusinessStartTime":"0900","BusinessEndTime":"1900","PeopleCount":[{"Time":"0800","TimeValue":"1"},{"Time":"0900","TimeValue":"2"},{"Time":"1000","TimeValue":"3"},{"Time":"1100","TimeValue":"4"},{"Time":"1200","TimeValue":"5"}]}},{"BuildingID":"470682087801865","Name":"お店C","Address":"〒639-1007 奈良県大和郡山市南郡山町〇〇−◯","InfoUrl":"https://www.google.com/","VirtualSpaceUrl":"","IsMapBoxOrigin":"False","Space":{"SpaceID":"0","BusinessStartTime":"0900","BusinessEndTime":"2400","PeopleCount":[{"Time":"1500","TimeValue":"8"},{"Time":"1600","TimeValue":"7"},{"Time":"1700","TimeValue":"6"},{"Time":"1800","TimeValue":"5"},{"Time":"1900","TimeValue":"4"},{"Time":"2000","TimeValue":"3"}]}}]}')},7640:function(e){e.exports=JSON.parse('{"map_center":{"lng":135.7827167223373,"lat":34.64708755203167},"hideBldgIds":[],"geojsonPath":"https://kingyo-map.github.io/map_publish1/assets/features.geojson","isCreateGeojsonBldgLayer":false,"color":{"selectedBuilding":"#0000FF","highlightBuildings":"#ffff00","relatedBuildings":"#ff4500","notRelatedBuilding":"#ffffff"}}')},a39c:function(e,t,i){},a8f0:function(e){e.exports=JSON.parse('{"modelOrigin":{"lng":135.78111946524226,"lat":34.64685839956293},"modelAltitude":0,"data":[{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":266,"y":0,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":286,"y":0,"z":60},"scaleNum":10},{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":246,"y":116,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":266,"y":116,"z":60},"scaleNum":10},{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":256,"y":213,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":206,"y":213,"z":60},"scaleNum":10},{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":166,"y":500,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":166,"y":500,"z":60},"scaleNum":10},{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":146,"y":-128,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":136,"y":-128,"z":60},"scaleNum":10},{"type":"obj","folderPath":"https://kingyo-map.github.io/map_publish1/assets/Ryukin_Goldfish/","mtlPath":"13001_Ryukin_Goldfish_v1_L3.mtl","filePath":"13001_Ryukin_Goldfish_v1_L3.obj","pos":{"x":306,"y":-325,"z":20},"scaleNum":1},{"type":"fbx","folderPath":"https://kingyo-map.github.io/map_publish1/assets/","filePath":"kingyo.fbx","pos":{"x":316,"y":-325,"z":60},"scaleNum":10}]}')},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("7a23"),n={class:"container-fluid"},o={class:"row"},l={class:"col-3"},r={class:"col-9"};function s(e,t,i,s,d,u){var c=Object(a["resolveComponent"])("BusinessHour"),p=Object(a["resolveComponent"])("TestChart"),g=Object(a["resolveComponent"])("Map");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",n,[Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",l,[Object(a["createVNode"])(c,{onOpenBldgId:u.updateOpenBldgId,tgtBldgId:u.getTgtBldgId},null,8,["onOpenBldgId","tgtBldgId"]),Object(a["createVNode"])(p,{selectBldgids:d.bldgIdFromMap},null,8,["selectBldgids"])]),Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(g,{onUploadBldgId:u.uploadBldgId1,highlightBldgIds:d.highlightBldgIdsFromApp,tgtBldgIds:d.tgtBldgIdsFromApp},null,8,["onUploadBldgId","highlightBldgIds","tgtBldgIds"])])])])}var d=function(e){return Object(a["pushScopeId"])("data-v-240df5f9"),e=e(),Object(a["popScopeId"])(),e},u=d((function(){return Object(a["createElementVNode"])("div",{id:"map"},null,-1)})),c=[u];function p(e,t,i,n,o,l){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,c)}var g=i("2909"),f=(i("99af"),i("d3b7"),i("d81d"),i("159b"),i("25f0"),i("7640")),h=i("a8f0"),m=i("1643"),b=i("688a"),v=i("e192"),y=i.n(v),I=(i("ac6d"),i("5a89")),x=i("34ad"),B=i("4086"),j=i("e642"),O=i("8710"),T=Object(a["defineComponent"])({emits:["add","uploadBldgId"],name:"HelloWorld",props:{highlightBldgIds:Array},setup:function(e,t){var i=!0,n=[];for(var o in b.BuildingInfo){var l=parseInt(b.BuildingInfo[o].BuildingID);n.push(l)}var r=Object(a["reactive"])({selectBldgids:[],count:0}),s=function(){r.count=r.count+1,t.emit("add",r.count)};return Object(a["onMounted"])((function(){y.a.accessToken="pk.eyJ1Ijoia2F0b3NodW4iLCJhIjoiY2t0eWVjN3dvMDlzbjJub3c2YndiZTJvNiJ9.GbIeJ78HgWKX6sh2mKy2pA";var o=new y.a.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:f.map_center,zoom:17,maxZoom:21,antialias:!0}),l=f.hideBldgIds;for(var s in m.data){var d=m.data[s];l=l.concat(d.bldgIds)}var u=!0,c=Object(a["toRefs"])(e),p=c.highlightBldgIds;function b(){u||(o.setFilter("main-buildings",["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["in","$id"].concat(Object(g["a"])(e.highlightBldgIds))]),o.setFilter("other-buildings",["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["!in","$id"].concat(Object(g["a"])(e.highlightBldgIds)),["in","$id"].concat(n)]))}Object(a["watch"])(p,(function(){})),Object(a["effect"])((function(){e.highlightBldgIds;b()})),o.on("load",(function(){var t="road-label";o.addLayer({id:"main-buildings",source:"composite","source-layer":"building",filter:["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["in","$id"].concat(Object(g["a"])(e.highlightBldgIds))],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":f.color.highlightBuildings,"fill-extrusion-height":["number",["get","height"],5],"fill-extrusion-base":["number",["get","min_height"],0],"fill-extrusion-opacity":.6}},t),o.addLayer({id:"selected-main-building",source:"composite","source-layer":"building",type:"fill-extrusion",paint:{"fill-extrusion-color":f.color.selectedBuilding,"fill-extrusion-height":["number",["get","height"],5],"fill-extrusion-base":["number",["get","min_height"],0],"fill-extrusion-opacity":.6},filter:["in","$id",""]},t),o.addLayer({id:"other-buildings",source:"composite","source-layer":"building",filter:["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["!in","$id"].concat(Object(g["a"])(e.highlightBldgIds)),["in","$id"].concat(n)],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":f.color.relatedBuildings,"fill-extrusion-height":["number",["get","height"],5],"fill-extrusion-base":["number",["get","min_height"],0],"fill-extrusion-opacity":.6}},t),o.addLayer({id:"selected-other-building",source:"composite","source-layer":"building",type:"fill-extrusion",paint:{"fill-extrusion-color":f.color.selectedBuilding,"fill-extrusion-height":["number",["get","height"],5],"fill-extrusion-base":["number",["get","min_height"],0],"fill-extrusion-opacity":.6},filter:["in","$id",""]},t),o.addLayer({id:"not-related-building",source:"composite","source-layer":"building",type:"fill-extrusion",filter:["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["!in","$id"].concat(Object(g["a"])(e.highlightBldgIds)),["!in","$id"].concat(n)],paint:{"fill-extrusion-color":f.color.notRelatedBuilding,"fill-extrusion-height":["number",["get","height"],5],"fill-extrusion-base":["number",["get","min_height"],0],"fill-extrusion-opacity":.6}},t);var i,a,r,s,d=h.modelOrigin,u=h.modelAltitude,c=[Math.PI/2*0,Math.PI/2*0,Math.PI/2*0],p=y.a.MercatorCoordinate.fromLngLat(d,u),b={translateX:p.x,translateY:p.y,translateZ:p.z,rotateX:c[0],rotateY:c[1],rotateZ:c[2],scale:p.meterInMercatorCoordinateUnits()},v=[],T={id:"kingyo",type:"custom",renderingMode:"3d",onAdd:function(e,t){i=new I["g"],a=new I["ib"];var n=new I["l"](16777215);n.position.set(0,-70,100).normalize(),a.add(n);var o=new I["l"](16777215);o.position.set(0,70,100).normalize(),a.add(o);var l=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t+"% downloaded")}},d=function(e){console.error("obj loader error!")};function u(e,t,i,n,o){p.setPath(e),p.load(t,(function(t){t.preload(),g.setMaterials(t),g.setPath(e),g.load(i,(function(e){e.position.x=n.x,e.position.y=n.y,e.position.z=n.z,e.scale.x=o,e.scale.y=o,e.scale.z=o,a.add(e),v.push(e)}),l,d)}))}function c(e,t,i,n){f.setPath(e),f.load(t,(function(e){e.position.x=i.x,e.position.y=i.y,e.position.z=i.z,e.scale.x=n,e.scale.y=n,e.scale.z=n,a.add(e),v.push(e)}),l,d)}var p=new B["a"],g=new j["a"],f=new O["a"];for(var m in h.data){var b=h.data[m];"obj"==b.type?u(b.folderPath,b.mtlPath,b.filePath,new I["ub"](b.pos.x,b.pos.y,b.pos.z),b.scaleNum):"fbx"==b.type?c(b.folderPath,b.filePath,new I["ub"](b.pos.x,b.pos.y,b.pos.z),b.scaleNum):alert("floatList.jsonに対象外のタイプのファイル定義があります")}r=e,s=new I["xb"]({canvas:e.getCanvas(),context:t,antialias:!0}),s.autoClear=!1},render:function(e,t){var n=(new I["L"]).makeRotationAxis(new I["ub"](1,0,0),b.rotateX),o=(new I["L"]).makeRotationAxis(new I["ub"](0,1,0),b.rotateY),l=(new I["L"]).makeRotationAxis(new I["ub"](0,0,1),b.rotateZ),d=(new I["L"]).fromArray(t),u=(new I["L"]).makeTranslation(b.translateX,b.translateY,b.translateZ).scale(new I["ub"](b.scale,-b.scale,b.scale)).multiply(n).multiply(o).multiply(l);i.projectionMatrix=d.multiply(u),s.resetState(),requestAnimationFrame((function(){})),v.forEach((function(e){_(e)})),s.render(a,i),r.triggerRepaint()}};function _(e){var t=new Date,i=!1;Math.round(t.getMinutes())%2===0&&(i=!0);var a=2,n=1;e.rotation.z=i?Math.PI/2*2:0;var o=1;i&&(o=-1),e.position.x+=o*a*(.7-Math.random()),e.position.z+=n*(.5-Math.random())}function w(e,t,i,a,n,l,r){if("gltf"==e||"glb"==e||"fbx"==e){var s,d,u,c,p=0,g=[Math.PI/2*1,Math.PI/2*0,Math.PI/2*0],f=y.a.MercatorCoordinate.fromLngLat(t,p),h={translateX:f.x,translateY:f.y,translateZ:f.z,rotateX:g[0],rotateY:g[1],rotateZ:g[2],scale:f.meterInMercatorCoordinateUnits()},m={id:i,type:"custom",renderingMode:"3d",onAdd:function(t,i){s=new I["g"],d=new I["ib"];var o=new I["l"](16777215);o.position.set(0,-70,100).normalize(),d.add(o);var p=new I["l"](16777215);p.position.set(0,70,100).normalize(),d.add(p);var g=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(t+"% downloaded")}},f=function(t){alert(e+" loader error:"+t)};if("gltf"==e||"glb"==e){var h=new x["a"];h.load(a+n,(function(e){e.scene.rotation.y=r/90*(Math.PI/2),e.scene.scale.x=l.x,e.scene.scale.y=l.y,e.scene.scale.z=l.z,d.add(e.scene)}),g,f)}else if("fbx"==e){var m=new O["a"];m.setPath(a),m.load(n,(function(e){e.rotation.y=r/90*(Math.PI/2),e.scale.x=l.x,e.scale.y=l.y,e.scale.z=l.z,d.add(e)}),g,f)}u=t,c=new I["xb"]({canvas:t.getCanvas(),context:i,antialias:!0}),c.autoClear=!1},render:function(e,t){var i=(new I["L"]).makeRotationAxis(new I["ub"](1,0,0),h.rotateX),a=(new I["L"]).makeRotationAxis(new I["ub"](0,1,0),h.rotateY),n=(new I["L"]).makeRotationAxis(new I["ub"](0,0,1),h.rotateZ),o=(new I["L"]).fromArray(t),l=(new I["L"]).makeTranslation(h.translateX,h.translateY,h.translateZ).scale(new I["ub"](h.scale,-h.scale,h.scale)).multiply(i).multiply(a).multiply(n);s.projectionMatrix=o.multiply(l),c.resetState(),c.render(d,s),u.triggerRepaint()}};o.addLayer(m,"waterway-label")}else alert("createBldgLayer：読み込み対象外のファイル形式です："+e)}for(var P in o.addLayer(T,"waterway-label"),m.data){var S=m.data[P];"gltf"!=S.type&&"glb"!=S.type&&"fbx"!=S.type||w(S.type,S.lnglat,S.layerName,S.folderPath,S.filePath,new I["ub"](S.scale.x,S.scale.y,S.scale.z),S.rotDeg)}function k(){o.addSource("floorplan",{type:"geojson",data:f.geojsonPath}),o.addLayer({id:"room-extrusion",type:"fill-extrusion",source:"floorplan",paint:{"fill-extrusion-color":["get","color"],"fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","base_height"],"fill-extrusion-opacity":.5}})}f.isCreateGeojsonBldgLayer&&k()})),o.on("click",(function(i){var a=[new y.a.Point(i.point.x-5,i.point.y-5),new y.a.Point(i.point.x+5,i.point.y+5)],s=o.queryRenderedFeatures(a,{layers:["other-buildings"]}),d=s.map((function(e){return e.id}));if(d.length>0){var u=[];d.forEach((function(e,t){var i;void 0!=e&&(i="string"==typeof e?e.toString():String(e),u.push(i))})),r.selectBldgids=u,t.emit("uploadBldgId",r.selectBldgids)}o.setFilter("other-buildings",["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["!in","$id"].concat(Object(g["a"])(e.highlightBldgIds)),["in","$id"].concat(n),["!in","$id"].concat(Object(g["a"])(d))]),o.setFilter("selected-other-building",["in","$id"].concat(Object(g["a"])(d)))})),o.on("click",(function(i){var a=[new y.a.Point(i.point.x-5,i.point.y-5),new y.a.Point(i.point.x+5,i.point.y+5)],n=o.queryRenderedFeatures(a,{layers:["main-buildings"]}),s=n.map((function(e){return e.id}));if(s.length>0){var d=[];s.forEach((function(e,t){var i;void 0!=e&&(i="string"==typeof e?e.toString():String(e),d.push(i))})),r.selectBldgids=d,t.emit("uploadBldgId",r.selectBldgids)}o.setFilter("main-buildings",["all",["==","extrude","true"],[">","height",0],["!in","$id"].concat(Object(g["a"])(l)),["in","$id"].concat(Object(g["a"])(e.highlightBldgIds)),["!in","$id"].concat(Object(g["a"])(s))]),o.setFilter("selected-main-building",["in","$id"].concat(Object(g["a"])(s)))})),i&&o.on("click",(function(e){var t=[new y.a.Point(e.point.x-5,e.point.y-5),new y.a.Point(e.point.x+5,e.point.y+5)],i=o.queryRenderedFeatures(t,{layers:["not-related-building"]}),a=i.map((function(e){return e.id}));a.length>0&&alert("建物情報がない建物が選択されました。（選択した建物のID："+a)})),u=!1})),{state:r,increment:s}}}),_=(i("2665"),i("6b0d")),w=i.n(_);const P=w()(T,[["render",p],["__scopeId","data-v-240df5f9"]]);var S=P,k=function(e){return Object(a["pushScopeId"])("data-v-bfbd86c8"),e=e(),Object(a["popScopeId"])(),e},V=k((function(){return Object(a["createElementVNode"])("h1",null,"◆店舗情報",-1)})),N={class:"wrapper"};function C(e,t,i,n,o,l){var r=Object(a["resolveComponent"])("BarChart");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[V,Object(a["createElementVNode"])("p",null,"店舗名: "+Object(a["toDisplayString"])(e.state.bldgName),1),Object(a["createElementVNode"])("p",null,"住所: "+Object(a["toDisplayString"])(e.state.bldgAddress),1),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(){return e.showWebPage&&e.showWebPage.apply(e,arguments)})},"ホームページ表示")]),Object(a["createElementVNode"])("p",null,[Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(){return e.showVirtualSpace&&e.showVirtualSpace.apply(e,arguments)})},"ヴァーチャルで入ってみる")]),Object(a["createElementVNode"])("div",N,[Object(a["createVNode"])(r,{chartData:e.state.barData},null,8,["chartData"])])])}i("a9e3");var z=i("9b4a"),M=i("b48c"),A=[],L=[];z["Chart"].register.apply(z["Chart"],Object(g["a"])(z["registerables"]));var D=Object(a["defineComponent"])({components:{BarChart:M["BarChart"]},props:{selectBldgids:Array},created:function(){},setup:function(e,t){var i=Object(a["reactive"])({barData:{labels:[],datasets:[{label:"来店人数",data:[],backgroundColor:["rgba(54, 162, 235)"]}]},bldgName:"",bldgAddress:"",bldgInfoUrl:"",bldgVirtualSpaceUrl:""});function n(e){for(var t in b.BuildingInfo){var i=b.BuildingInfo[t];if(i.BuildingID==String(e))return i.Name}return"notFound"}function o(e){for(var t in b.BuildingInfo){var i=b.BuildingInfo[t];if(i.BuildingID==String(e))return i.Address}return"notFound"}function l(e){for(var t in b.BuildingInfo){var i=b.BuildingInfo[t];if(i.BuildingID==String(e))return i.InfoUrl}return"notFound"}function r(e){for(var t in b.BuildingInfo){var i=b.BuildingInfo[t];if(i.BuildingID==String(e))return i.VirtualSpaceUrl}return"notFound"}function s(e){for(var t in A=[],L=[],b.BuildingInfo)if(b.BuildingInfo[t].BuildingID==String(e))for(var i in b.BuildingInfo[t].Space.PeopleCount)A.push(b.BuildingInfo[t].Space.PeopleCount[i].Time),L.push(Number(b.BuildingInfo[t].Space.PeopleCount[i].TimeValue));0==A.length&&alert("TestData.jsonにデータのある建物を選択してください。選択された建物のID："+e);var a={labels:A,datasets:[{label:"来店人数",data:L,backgroundColor:["rgba(54, 162, 235)"]}]};return a}Object(a["effect"])((function(){e.selectBldgids.length>0&&(i.barData=s(e.selectBldgids[0]),i.bldgName=n(e.selectBldgids[0]),i.bldgAddress=o(e.selectBldgids[0]),i.bldgInfoUrl=l(e.selectBldgids[0]),i.bldgVirtualSpaceUrl=r(e.selectBldgids[0]))}));var d=function(){window.open(i.bldgInfoUrl)},u=function(){""!==i.bldgVirtualSpaceUrl?window.open(i.bldgVirtualSpaceUrl):alert("こちらの店舗のバーチャル化は進行中です。")};return{state:i,showWebPage:d,showVirtualSpace:u}}});i("e2f5");const R=w()(D,[["render",C],["__scopeId","data-v-bfbd86c8"]]);var E=R,F=function(e){return Object(a["pushScopeId"])("data-v-1939181e"),e=e(),Object(a["popScopeId"])(),e},G=F((function(){return Object(a["createElementVNode"])("h1",null,"◆開店店舗表示",-1)})),U=Object(a["createTextVNode"])(" 入力した時間帯にずっと空いている店舗が分かります。 "),$=Object(a["createStaticVNode"])('<option value="-" selected data-v-1939181e>--:--</option><option value="1000" data-v-1939181e>10:00</option><option value="1100" data-v-1939181e>11:00</option><option value="1200" data-v-1939181e>12:00</option><option value="1300" data-v-1939181e>13:00</option><option value="1400" data-v-1939181e>14:00</option><option value="1500" data-v-1939181e>15:00</option><option value="1600" data-v-1939181e>16:00</option><option value="1700" data-v-1939181e>17:00</option><option value="1800" data-v-1939181e>18:00</option><option value="1900" data-v-1939181e>19:00</option><option value="2000" data-v-1939181e>20:00</option><option value="2100" data-v-1939181e>21:00</option><option value="2200" data-v-1939181e>22:00</option><option value="2300" data-v-1939181e>23:00</option><option value="2400" data-v-1939181e>24:00</option>',16),J=[$],Y=Object(a["createTextVNode"])(" ～ "),Z=Object(a["createStaticVNode"])('<option value="-" selected data-v-1939181e>--:--</option><option value="1100" data-v-1939181e>11:00</option><option value="1200" data-v-1939181e>12:00</option><option value="1300" data-v-1939181e>13:00</option><option value="1400" data-v-1939181e>14:00</option><option value="1500" data-v-1939181e>15:00</option><option value="1600" data-v-1939181e>16:00</option><option value="1700" data-v-1939181e>17:00</option><option value="1800" data-v-1939181e>18:00</option><option value="1900" data-v-1939181e>19:00</option><option value="2000" data-v-1939181e>20:00</option><option value="2100" data-v-1939181e>21:00</option><option value="2200" data-v-1939181e>22:00</option><option value="2300" data-v-1939181e>23:00</option><option value="2400" data-v-1939181e>24:00</option>',15),X=[Z];function W(e,t,i,n,o,l){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[G,U,Object(a["createElementVNode"])("ul",null,[Object(a["createElementVNode"])("select",{name:"startTime",onChange:t[0]||(t[0]=function(t){return e.GetStartTime(t)})},J,32),Y,Object(a["createElementVNode"])("select",{name:"endTime",onChange:t[1]||(t[1]=function(t){return e.GetEndTime(t)})},X,32)])])}var q=Object(a["defineComponent"])({emits:["openBldgId"],name:"Test",props:{highlightBldgIds:Array,startTime:String,endTime:String},setup:function(e,t){var i=Object(a["toRefs"])(e),n=i.startTime;n="-";var o=Object(a["toRefs"])(e),l=o.endTime;function r(e){n=e.target.value,"-"!=l&&d()}function s(e){l=e.target.value,"-"!=n&&d()}function d(){var e=[];for(var i in b.BuildingInfo){if(parseInt(b.BuildingInfo[i].Space.BusinessStartTime)<=parseInt(n)&&parseInt(b.BuildingInfo[i].Space.BusinessEndTime)>=parseInt(l)){var a=parseInt(b.BuildingInfo[i].BuildingID);e.push(a)}t.emit("openBldgId",e)}}return l="-",{GetStartTime:r,GetEndTime:s,TestFunction:d}}});i("2837");const H=w()(q,[["render",W],["__scopeId","data-v-1939181e"]]);var K=H,Q={data:function(){return{count1:0,totalcount:0,bldgIdFromMap:"",highlightBldgIdsFromApp:[],tgtBldgIdsFromApp:[],bldgId:"99999"}},components:{Map:S,TestChart:E,BusinessHour:K},methods:{add1:function(e){this.count1=e,this.totalcount+=e},updateOpenBldgId:function(e){this.highlightBldgIdsFromApp=e},getTgtBldgId:function(e){this.tgtBldgIdsFromApp=e,alert(e)},uploadBldgId1:function(e){this.bldgIdFromMap=e}}};const ee=w()(Q,[["render",s]]);var te=ee,ie=(i("f9e3"),i("2dd8"),Object(a["createApp"])(te));ie.mount("#app")},e2f5:function(e,t,i){"use strict";i("fe08")},fe08:function(e,t,i){}});
//# sourceMappingURL=app.cb32be27.js.map